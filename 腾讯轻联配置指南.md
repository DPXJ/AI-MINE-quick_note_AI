# 腾讯轻联 TickTick 集成配置指南

## 📋 概述

本指南将帮助你在腾讯轻联（Tencent Light Link）中配置 Webhook 流程，实现 QuickNote AI 与 TickTick 的集成。

## 🚀 配置步骤

### 第一步：登录腾讯轻联

1. 访问 [腾讯轻联官网](https://lightlink.tencent.com/)
2. 使用你的腾讯账号登录

### 第二步：创建新流程

1. 在左侧菜单中，点击 **"新建流程"** 按钮
2. 或者点击 **"流程"** → **"我的流程"** → **"新建流程"**

### 第三步：添加 Webhook 触发组件

1. 在流程编辑器中，找到 **"触发组件"** 区域
2. 点击 **"Webhook - 监听事件"** 组件
3. 在右侧配置面板中，你会看到两个标签页：
   - **"触发条件"**：这里会显示 Webhook URL
   - **"参数配置"**：这里配置响应参数

#### 📍 如何找到 Webhook URL：

**方法一：在"触发条件"标签页中查看**
1. 点击右侧配置面板顶部的 **"触发条件"** 标签页（不是"参数配置"）
2. 在"触发条件"标签页中，你会看到一个显示 Webhook URL 的区域
3. 通常显示格式类似：`https://lightlink.tencent.com/webhook/xxxxx`
4. 点击 URL 旁边的 **"复制"** 按钮，或直接选中 URL 文本复制

**方法二：在 Webhook 组件标题旁查看**
1. 在右侧配置面板的顶部，**"Webhook - 监听事件"** 标题旁边
2. 可能会有一个刷新图标或链接，点击后可以查看完整的 Webhook URL
3. 有些版本会在标题下方直接显示 URL

**方法三：上线流程后查看**
1. 如果上述方法找不到，可以先完成流程配置
2. 点击右上角的 **"上线流程"** 按钮
3. 上线后，在流程详情页或"运行日志"中可以找到 Webhook URL

#### ⚙️ 配置响应参数（可选）：

在 **"参数配置"** 标签页中：
- **"正确状态码"**：填写 `200`（表示成功）
- **"响应头"**：可以留空，或根据需要添加
- **"响应体"**：可以留空，或根据需要配置返回内容

**重要提示**：
- Webhook URL 在流程上线前后可能会不同
- 建议使用**上线后**的 Webhook URL（生产环境）
- 复制完整的 URL，包括 `https://` 开头

### 第四步：添加 TickTick 执行组件

1. 在 **"执行流程"** 区域，点击 **"+"** 按钮
2. 搜索并选择 **"TickTick - 创建任务"** 组件
3. 在右侧配置面板中，配置 TickTick 连接：
   - 如果是第一次使用，需要先授权 TickTick 账号
   - 点击 **"授权"** 或 **"连接"** 按钮
   - 按照提示完成 TickTick 账号授权

### 第五步：配置 TickTick 任务字段映射

在 **"TickTick - 创建任务"** 组件的配置面板中，需要将 Webhook 接收到的数据映射到 TickTick 的字段：

#### 必填字段映射：

- **"标题"** (title)：
  - 映射到 Webhook 接收的 `title` 字段
  - 或者使用表达式：`{{trigger.title}}`

- **"内容/备注"** (content)：
  - 映射到 Webhook 接收的 `content` 字段
  - 或者使用表达式：`{{trigger.content}}`

#### 可选字段映射：

- **"清单名称"** (list_name)：
  - 映射到 Webhook 接收的 `list_name` 字段
  - 或者使用表达式：`{{trigger.list_name}}`
  - 如果留空，任务会创建到默认清单

- **"截止时间"** (due_date)：
  - 映射到 Webhook 接收的 `due_date` 字段
  - 或者使用表达式：`{{trigger.due_date}}`
  - 格式：`YYYY-MM-DDTHH:MM:SS+0800`（例如：`2024-12-20T17:00:00+0800`）

### 第六步：测试流程

1. 在流程编辑器中，点击右上角的 **"检查"** 按钮，检查配置是否正确
2. 点击 **"执行预览"** 按钮，测试流程是否能正常运行
3. 如果测试成功，点击 **"上线流程"** 按钮，使流程生效

### 第七步：在 QuickNote AI 中配置

1. 打开 QuickNote AI 应用
2. 右键系统托盘图标 → 选择 **"设置"**
3. 在设置界面中，找到 **"滴答清单配置（通过腾讯轻联）"** 部分
4. 将第三步复制的 **Webhook URL** 粘贴到 **"腾讯轻联 Webhook URL"** 输入框中
5. 点击 **"保存"** 按钮
6. 点击 **"测试连接"** 按钮，验证配置是否正确

## 📝 数据格式说明

QuickNote AI 发送到腾讯轻联 Webhook 的数据格式如下：

```json
{
  "title": "任务标题",
  "content": "任务内容/备注",
  "list_name": "清单名称（可选）",
  "due_date": "2024-12-20T17:00:00+0800（可选，格式：YYYY-MM-DDTHH:MM:SS+0800）"
}
```

## 🔧 常见问题

### Q1: Webhook URL 在哪里找到？

**A:** 有以下几种方法：

1. **在"触发条件"标签页中**：
   - 点击 **"Webhook - 监听事件"** 组件
   - 在右侧配置面板顶部，点击 **"触发条件"** 标签页（不是"参数配置"）
   - 在"触发条件"页面中会显示 Webhook URL
   - 点击 URL 旁边的复制按钮或直接选中复制

2. **在组件标题旁**：
   - 有些版本会在 **"Webhook - 监听事件"** 标题旁边显示 URL
   - 或有一个刷新图标，点击后可以查看完整 URL

3. **上线流程后**：
   - 完成流程配置后，点击 **"上线流程"**
   - 上线后，在流程详情页或"运行日志"中可以找到 Webhook URL
   - **注意**：上线后的 URL 可能与测试环境的 URL 不同，建议使用上线后的 URL

4. **执行预览后**：
   - 点击 **"执行预览"** 按钮
   - 在预览结果中可能会显示完整的 Webhook 地址

**如果仍然找不到**：
- 检查是否已保存流程
- 尝试先上线流程，再查看 URL
- 查看腾讯轻联的帮助文档或联系客服

### Q2: 如何测试 Webhook 是否正常工作？

**A:** 可以使用以下方法测试：

1. **使用 Postman 或 curl**：
   ```bash
   curl -X POST https://lightlink.tencent.com/webhook/your_webhook_url \
     -H "Content-Type: application/json" \
     -d '{
       "title": "测试任务",
       "content": "这是一个测试任务",
       "due_date": "2024-12-20T17:00:00+0800"
     }'
   ```

2. **在 QuickNote AI 中测试**：
   - 在设置界面中点击 **"测试连接"** 按钮
   - 或者在快速输入窗口中输入一条任务并发送

### Q3: 任务没有创建到指定的清单？

**A:** 检查以下几点：

1. 确保在 TickTick 组件中正确映射了 `list_name` 字段
2. 确保清单名称与 TickTick 中的实际清单名称完全一致（区分大小写）
3. 如果 `list_name` 为空或未映射，任务会创建到默认清单

### Q4: 截止时间没有设置？

**A:** 检查以下几点：

1. 确保在 TickTick 组件中正确映射了 `due_date` 字段
2. 确保时间格式正确：`YYYY-MM-DDTHH:MM:SS+0800`
3. 确保 QuickNote AI 成功识别并提取了时间信息（输入内容中包含明确的时间表达）

### Q5: 流程上线后，Webhook URL 会变化吗？

**A:** 根据腾讯轻联的说明，不同环境（测试/生产）的 Webhook URL 可能不同。确保使用**上线环境**的 Webhook URL。

## 📚 更多资源

- [腾讯轻联官方文档](https://lightlink.tencent.com/docs)
- [TickTick 集成说明](https://lightlink.tencent.com/docs/integrations/ticktick)

## ✅ 配置检查清单

- [ ] 已创建腾讯轻联账号并登录
- [ ] 已创建新流程
- [ ] 已添加 "Webhook - 监听事件" 触发组件
- [ ] 已复制 Webhook URL
- [ ] 已添加 "TickTick - 创建任务" 执行组件
- [ ] 已完成 TickTick 账号授权
- [ ] 已正确映射字段（title, content, list_name, due_date）
- [ ] 已测试流程并上线
- [ ] 已在 QuickNote AI 中配置 Webhook URL
- [ ] 已在 QuickNote AI 中测试连接成功

---

配置完成后，你就可以在 QuickNote AI 中快速创建 TickTick 任务了！🎉

