# TickTick 邮箱集成配置说明

## 📋 概述

QuickNote AI 现在支持通过邮件方式将任务发送到滴答清单，无需使用第三方集成平台（如腾讯轻联、集简云），更加简单直接。

## 🚀 配置步骤

### 第一步：获取滴答清单专属邮箱

1. **Web端/PC端**：
   - 点击头像 → **设置** → **日历与邮件** → **通过邮件创建任务**
   - 复制生成的邮箱地址（格式：`todo+xxxxx@mail.dida365.com`）

2. **手机端**：
   - 设置 → **导入与关联** → **通过邮件创建任务**
   - 复制生成的邮箱地址

### 第二步：配置发件邮箱（QQ/163等）

#### QQ邮箱配置：

1. 登录 QQ 邮箱
2. 进入 **设置** → **账户**
3. 找到 **POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV服务**
4. 开启 **POP3/SMTP服务** 或 **IMAP/SMTP服务**
5. 点击 **生成授权码**，复制生成的授权码（**不是登录密码！**）

#### 163邮箱配置：

1. 登录 163 邮箱
2. 进入 **设置** → **POP3/SMTP/IMAP**
3. 开启 **SMTP服务**
4. 获取授权码（在设置页面中生成）

### 第三步：在 QuickNote AI 中配置

1. 打开 QuickNote AI 应用
2. 右键系统托盘图标 → 选择 **"设置"**
3. 在设置界面中，找到 **"滴答清单配置（通过邮件）"** 部分
4. 填写以下信息：
   - **SMTP服务器**：`smtp.qq.com`（QQ邮箱）或 `smtp.163.com`（163邮箱）
   - **SMTP端口**：`465`（SSL）
   - **发件邮箱**：你的邮箱地址（如：`your_email@qq.com`）
   - **SMTP授权码**：刚才复制的授权码（不是登录密码）
   - **滴答清单邮箱**：第一步复制的专属邮箱地址
5. 点击 **"保存"** 按钮
6. 点击 **"测试连接"** 按钮，验证配置是否正确

## 📝 邮件格式说明

滴答清单支持智能识别邮件标题中的特殊格式：

### 优先级标记：
- `!!!` = 高优先级
- `!!` = 中优先级
- `!` = 低优先级

### 清单标记：
- `^清单名` = 指定任务所属清单

### 时间识别：
- 滴答清单会自动识别标题中的时间信息
- 支持自然语言时间表达（如："明天下午3点"、"下周一"、"12月20号"等）

### 示例：

**邮件标题**：`和老王吃饭 明天下午5点 !!! ^个人`

**解析结果**：
- 任务标题：和老王吃饭
- 时间：明天下午5点（自动识别）
- 优先级：高（!!!）
- 清单：个人

## 🎯 使用方式

### 快速输入：

1. 按 `Ctrl+Shift+Space` 打开快速输入窗口
2. 切换到 **"滴答清单"** 标签
3. 输入任务内容（如："明天下午5点，惠济聚会"）
4. 点击 **"发送"** 或按 `Enter`

### 自动同步：

1. 开启剪切板自动同步
2. 复制包含时间信息的任务文本
3. AI 会自动识别并同步到滴答清单

## 🔧 常见问题

### Q1: 发送失败，提示"认证失败"

**A:** 检查以下几点：
1. **SMTP授权码是否正确**：确保使用的是授权码，不是邮箱登录密码
2. **SMTP服务器和端口是否正确**：
   - QQ邮箱：`smtp.qq.com:465`
   - 163邮箱：`smtp.163.com:465`
3. **是否开启了SMTP服务**：在邮箱设置中确认已开启

### Q2: 任务没有创建到指定的清单

**A:** 
1. 确保清单名称与滴答清单中的实际清单名称完全一致（区分大小写）
2. 在邮件标题中使用 `^清单名` 格式（注意：`^` 符号前要有空格）

### Q3: 时间没有自动识别

**A:**
1. 确保输入内容中包含明确的时间表达（如："明天"、"下周一"、"下午3点"等）
2. 时间信息会自动保留在任务标题中，滴答清单会识别
3. 如果时间识别失败，可以手动在滴答清单中修改

### Q4: 优先级没有设置

**A:**
1. 优先级需要在代码中通过 `extra` 参数传递
2. 当前版本中，优先级需要从 AI 分类结果中获取
3. 如果需要在快速输入中手动设置优先级，需要修改 UI 代码

## 📚 技术说明

### 邮件发送流程：

1. QuickNote AI 构建邮件（标题 + 正文）
2. 通过 SMTP 发送到滴答清单专属邮箱
3. 滴答清单自动识别邮件并创建任务

### 数据格式：

```python
# 邮件标题示例
"和老王吃饭 明天下午5点 !!! ^个人"

# 邮件正文示例
"备注：记得带两瓶茅台。"
```

## ✅ 配置检查清单

- [ ] 已获取滴答清单专属邮箱地址
- [ ] 已配置发件邮箱的 SMTP 服务
- [ ] 已获取 SMTP 授权码（不是登录密码）
- [ ] 已在 QuickNote AI 中填写所有配置项
- [ ] 已测试连接成功
- [ ] 已测试发送任务成功

---

配置完成后，你就可以通过邮件方式快速创建 TickTick 任务了！🎉

